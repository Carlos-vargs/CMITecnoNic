(()=>{const e=(e="dropdown-wrapper-",t="table-collapse")=>{const o=()=>{document.querySelectorAll(".popper-ref").forEach((t=>{if(!t.dataset.popperInitialized){const o=t.closest(`[id^="${e}"]`).id;new Popper(`#${o}`,".popper-ref",".popper-root",{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,4]}}]}),t.dataset.popperInitialized="true"}}))},a=new MutationObserver((e=>{e.forEach((e=>{"childList"==e.type&&o()}))})),r=document.getElementById(t);a.observe(r,{childList:!0,subtree:!0}),o()};window.addEventListener("app:mounted",(()=>{new Modal("#perspectiveModal"),new Modal("#perspectiveEditModal"),new Modal("#objetiveModal"),new Modal("#objetiveEditModal"),new Modal("#indicatorModal"),new Modal("#indicatorEditModal"),new Modal("#indicatorDataModal"),window.openPerspectiveModal=async function(e){try{const t=document.getElementById("PerspectiveEditTitle"),o=e.getAttribute("data-id"),a=e.getAttribute("data-name"),r=document.querySelector("#formPerspectiveEditName"),i=document.querySelector("#formPerspectiveId");if(t.textContent="Editar Perspectiva: "+a,!o)return;const d=await fetch(`https://localhost:44357/Perspectives/Edit/${o}`),n=await d.json();r.value=n?.Perspective?.Name,i.value=n?.Perspective?.id}catch(e){console.error("Error loading perspective data",e)}},window.openObjetiveEditModal=async function(e){try{const t=document.getElementById("objectiveEditTitle"),o=e.getAttribute("data-id"),a=e.getAttribute("data-name"),r=document.querySelector("#formObjetiveEditName"),i=document.querySelector("#formObjectiveId"),d=document.querySelector("#formObjectiveParentId");if(t.textContent="Editar objetivo: "+a,!o)return;const n=await fetch(`https://localhost:44357/Objectives/Edit/${o}`),c=await n.json();console.log({data:c}),r.value=c?.Objective?.Description,i.value=c?.Objective?.id,d.value=c?.Objective?.PerspectiveId}catch(e){console.error("Error loading perspective data",e)}},window.openIndicadorEditModal=async function(e){try{const t=document.getElementById("TitleEditIndicator"),o=e.getAttribute("data-id"),a=e.getAttribute("data-name"),r=document.querySelector("#formIndicatorId"),i=document.querySelector("#formObjectivIndicatorId"),d=document.querySelector("#formMetricId"),n=document.querySelector("#formIndicatorName"),c=document.querySelector("#formIndicatorDescription"),l=document.querySelector("#formMeasurementFrequency"),s=document.querySelector("#formUnitMeasure");if(t.textContent="Editar indicator: "+a,!o)return;const u=await fetch(`https://localhost:44357/Indicators/Edit/${o}`),p=await u.json();i.value=p?.Indicator?.ObjectiveParentId,n.value=p?.Indicator?.Name,r.value=p?.Indicator?.Id,l.value=p?.Indicator?.MeasurementFrequency,s.value=p?.Indicator?.UnitMeasure,c.value=p?.Indicator?.Description,d.value=p?.MetricType?.Id}catch(e){console.error("Error loading perspective data",e)}},window.openObjectiveModal=function(e){const t=document.getElementById("modalTitle"),o=document.getElementById("perspectiveId"),a=e.getAttribute("data-id"),r=e.getAttribute("data-name");t.textContent="Crear Objetivo - "+r,o.value=a},window.openIndicatorModal=function(e){const t=document.getElementById("modalTitleIndicator"),o=document.getElementById("objectiveId"),a=e.getAttribute("data-id"),r=e.getAttribute("data-name");t.textContent="Crear Indicador - "+r,o.value=a},window.openIndicatorDataModal=function(e){const t=document.getElementById("modalTitleDataIndicator"),o=e.getAttribute("data-name");t.textContent="Editar Valores: "+o;const a=document.querySelector("#indicatorDatePicker");a._datepicker=flatpickr(a)},window.tableCollapse=new Accordion(document.querySelector("#table-collapse"),{onlyChildNodes:!0,duration:200,showMultiple:!0}),document.querySelectorAll("[id^='table-collapse-objetive-']").forEach((e=>{new Accordion(e,{onlyChildNodes:!1,duration:200,showMultiple:!0,elementClass:"ac-objetive",triggerClass:"ac-trigger-objetive",activeClass:"is-active-objetive"})}));const e={colors:["#3AC5BC"],chart:{height:30,width:60,type:"line",parentHeightOffset:0,toolbar:{show:!1}},series:[{name:"Stat",data:[654,820,102,540,154,614]}],dataLabels:{enabled:!1},stroke:{curve:"smooth",width:3},grid:{padding:{left:0,right:0,top:-28,bottom:0}},xaxis:{show:!1,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},yaxis:{show:!1,axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}}},t=document.querySelector("#watchlist-2-chart");setTimeout((()=>{t._chart=new ApexCharts(t,e),t._chart.render()}))}),{once:!0}),document.addEventListener("DOMContentLoaded",(function(){e(),e("dropdown-wrapper-objetive-","table-collapse-objetive"),e("dropdown-wrapper-indicator-","table-collapse-indicator")}))})();